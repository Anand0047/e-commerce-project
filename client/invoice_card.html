<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>invoice card - Bootdey.com</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
<style type="text/css">
    body{
        margin-top:20px;
        background-color:#eee;
    }

    .card {
        box-shadow: 0 20px 27px 0 rgb(0 0 0 / 5%);
    }
    .card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 0 solid rgba(0,0,0,.125);
        border-radius: 1rem;
    }
</style>
</head>
<body>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css" integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin="anonymous" />
<div class="container">
<div class="row">
<div class="col-lg-12">
<div class="card">
<div class="card-body">
<div class="invoice-title">
<h4 class="float-end font-size-15">Invoice #DS0204 <span class="badge bg-success font-size-12 ms-2">Paid</span></h4>
<div class="mb-4">
<h2 class="mb-1 text-muted">STRIX invoice</h2>
</div>
<div class="text-muted">
<p class="mb-1">Vels university</p>
<p class="mb-1">strix@care.info</p>
<p><i class="uil uil-phone me-1"></i> 012-345-6789</p>
</div>
</div>
<hr class="my-4">
<div class="row">
<div class="col-sm-6">
<div class="text-muted">
<h5 class="font-size-16 mb-3">Billed To:</h5>
<h5 class="font-size-15 mb-2 customer-name">Preston Miller</h5>
<p class="customer-address"></p>
<p class="customer-email"></p>
<p class="customer-phone"></p>
</div>
</div>

<div class="col-sm-6">
<div class="text-muted text-sm-end">
<div>
<h5 class="font-size-15 mb-1">Invoice No:</h5>
<p>#DZ0112</p>
</div>
<div class="mt-4">
<h5 class="font-size-15 mb-1">Invoice Date:</h5>
<p></p>
</div>
<div class="mt-4">
<h5 class="font-size-15 mb-1">Order No:</h5>
<p>#1123456</p>
</div>
</div>
</div>

</div>

<div class="py-2">
<h5 class="font-size-15">Order Summary</h5>
<div class="table-responsive">
<table class="table align-middle table-nowrap table-centered mb-0">
<thead>
<tr>
<th style="width: 70px;">No.</th>
<th>Item</th>
<th>Price</th>
<th>Quantity</th>
<th class="text-end" style="width: 120px;">Total</th>
</tr>
</thead>
<tbody>
<tr>
<th scope="row">01</th>
<td>
<div>
<h5 class="text-truncate font-size-14 mb-1 product-title">Black Strap A012</h5>
</div>
</td>
<td class="last-price">$ 245.50</td>
<td>1</td>
<td class="text-end new-price">$ 245.50</td>
</tr>


<tr>
<th scope="row" colspan="4" class="text-end">Sub Total</th>
<td class="text-end total">$732.50</td>
</tr>

<tr>
    <td>
        <h3>Total: <span id="cartTotal"></span></h3>
    </td>
</tr>
</tbody>
</table>
</div>

<div class="d-print-none mt-4">
<div class="float-end">
    <a href="javascript:window.print()" class="btn btn-success me-1" style="width: 120px;"><i class="fa fa-print">   Print</i></a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script>

    window.onload = function() {
        // Retrieve data from local storage
        var paymentDetails = JSON.parse(localStorage.getItem('paymentDetails'));
        var cartItems = JSON.parse(localStorage.getItem('cart'));
        var userData = JSON.parse(localStorage.getItem('userData'));
        var cartTotal = localStorage.getItem('cartTotal');

        if(userData){
            $('.customer-email').text(userData.email);
        }

        // Populate invoice with retrieved data
        if (paymentDetails) {
            $('.customer-name').text(paymentDetails.name);
            $('.customer-address').text(paymentDetails.address);
            $('.customer-phone').text(paymentDetails.phoneNumber);
        }

        if (cartItems && cartItems.length > 0) {
            var totalPrice = 0;
            var tbody = $('.table tbody');
            tbody.empty();

            $.each(cartItems, function (index, item) {
                var total = item.price;
                totalPrice += total;
                var newRow = '<tr>' +
                    '<th scope="row">' + (index + 1) + '</th>' +
                    '<td><div><h5 class="text-truncate font-size-14 mb-1 product-title">' + item.name + '</h5></div></td>' +
                    '<td class="last-price">$ ' + item.price.toFixed(2) + '</td>' +
                    '<td>1</td>' +  // Quantity always set to 1
                    '<td class="text-end new-price">$ ' + total.toFixed(2) + '</td>' +
                    '</tr>';
                tbody.append(newRow);
            });

            $('.total').text('$' + totalPrice.toFixed(2));
            $('#cartTotal').text(totalPrice); // Set cart total
        }
    };


</script>
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
